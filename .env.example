# =============================================================================
# TEQUITY MONOREPO - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your values
# For deployment, set these as environment variables in your hosting platform
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION (REQUIRED)
# =============================================================================

# Master Database (Neon PostgreSQL) - Platform-level data (tenants, admins, subscriptions)
# Used by: apps/admin, apps/main, packages/database
MASTER_DATABASE_URL=postgresql://user:password@host/database?sslmode=require

# Tenant Database - Same as master for development, separate per-tenant in production
# Used by: apps/main (for tenant-specific data)
DATABASE_URL=postgresql://user:password@host/database?sslmode=require

# =============================================================================
# AUTHENTICATION & SECURITY (REQUIRED)
# =============================================================================

# JWT Secret - Used for signing authentication tokens (min 32 characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Used by: apps/main, apps/admin, packages/utils
JWT_SECRET=your-jwt-secret-key-min-32-chars-generate-securely

# Encryption Key - Used for AES-256 encryption of sensitive data (tenant DB credentials)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Used by: apps/main, packages/utils
ENCRYPTION_KEY=your-encryption-key-for-aes-256-generate-securely

# Service API Key - For service-to-service authentication (main app to admin)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Used by: apps/admin
SERVICE_API_KEY=generate-secure-service-api-key-min-32-chars

# =============================================================================
# APP URLs (REQUIRED)
# =============================================================================

# Main Application URL (customer-facing SaaS platform)
# Development: http://localhost:3000
# Production: https://your-app-domain.com
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Admin Dashboard URL
# Development: http://localhost:3001
# Production: https://admin.your-domain.com
NEXT_PUBLIC_ADMIN_URL=http://localhost:3001

# Customer App URL (alias for admin, used in redirects)
NEXT_PUBLIC_CUSTOMER_APP_URL=http://localhost:3001

# =============================================================================
# FEATURE FLAGS (OPTIONAL - defaults provided)
# =============================================================================

# Provisioning Provider: 'mock' | 'supabase' | 'pulumi'
# - mock: No real provisioning (development/testing)
# - supabase: Use Supabase Management API
# - pulumi: Use Pulumi with GCP
PROVISIONING_PROVIDER=mock

# Email Provider: 'mock' | 'resend' | 'sendgrid'
# - mock: Logs emails to console (development)
EMAIL_PROVIDER=mock

# Feature Toggles (true/false)
FEATURE_TEAM_INVITES=true
FEATURE_AI_CHAT=true
FEATURE_FILE_PROCESSING=true

# =============================================================================
# SUPABASE PROVISIONING (Required if PROVISIONING_PROVIDER=supabase)
# =============================================================================

# Get from: https://supabase.com/dashboard/account/tokens
SUPABASE_ACCESS_TOKEN=sbp_xxx

# Your Supabase organization ID
SUPABASE_ORG_ID=xxx

# Region for new Supabase projects
SUPABASE_REGION=us-east-1

# =============================================================================
# PULUMI/GCP PROVISIONING (Required if PROVISIONING_PROVIDER=pulumi)
# =============================================================================

# Pulumi Access Token (from app.pulumi.com)
PULUMI_ACCESS_TOKEN=pul_xxx

# Or use local state with passphrase
PULUMI_CONFIG_PASSPHRASE=your-passphrase

# GCP Configuration
GCP_PROJECT_ID=your-gcp-project
GCP_REGION=us-central1

# Path to GCP service account key file (local development)
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# =============================================================================
# OPENAI / AI FEATURES (Required if FEATURE_AI_CHAT=true)
# =============================================================================

# OpenAI API Key
OPENAI_API_KEY=sk-xxx

# Model Configuration (optional - defaults shown)
OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
OPENAI_LLM_MODEL=gpt-4o

# =============================================================================
# FILE UPLOAD CONFIGURATION (OPTIONAL)
# =============================================================================

# Directory for file uploads (default: ./uploads)
UPLOAD_DIR=./uploads

# Maximum file size in bytes (default: 50MB)
MAX_FILE_SIZE=52428800

# =============================================================================
# ENVIRONMENT & RUNTIME (OPTIONAL)
# =============================================================================

# Node environment: development | staging | production
NODE_ENV=development

# Admin secret for initialization endpoints
ADMIN_SECRET=admin-secret-change-me

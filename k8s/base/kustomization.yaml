apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: tequity

resources:
  - namespace.yaml
  - serviceaccount.yaml
  - secrets.yaml
  - main-deployment.yaml
  - main-service.yaml
  - main-hpa.yaml
  - admin-deployment.yaml
  - admin-service.yaml
  - admin-hpa.yaml
  - ingress.yaml

# Use configMapGenerator instead of resource file for proper overlay merging
configMapGenerator:
  - name: app-config
    literals:
      - NODE_ENV=production
      - GCP_REGION=us-central1
      - NEXT_PUBLIC_APP_URL=https://app.ajitgadkari.com
      - NEXT_PUBLIC_ADMIN_URL=https://admin.ajitgadkari.com

generatorOptions:
  disableNameSuffixHash: true

labels:
  - pairs:
      app.kubernetes.io/part-of: tequity
      app.kubernetes.io/managed-by: kustomize
